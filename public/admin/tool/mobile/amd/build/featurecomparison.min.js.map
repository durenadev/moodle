{"version":3,"file":"featurecomparison.min.js","sources":["../src/featurecomparison.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Feature comparison toggle for tool_mobile subscription page.\n *\n * @copyright  2026 Daniel Urena\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\ndefine(['core/str'], function(Str) {\n\n    /**\n     * Initialise a single feature comparison card.\n     *\n     * @param {HTMLElement} card\n     */\n    const initCard = (card) => {\n        if (!card) {\n            return;\n        }\n\n        const rows = Array.from(\n            card.querySelectorAll('.feature-comparison-rows .feature-comparison-row')\n        );\n        const toggle = card.querySelector('.feature-comparison-toggle');\n\n        if (!rows.length || !toggle) {\n            return;\n        }\n\n        const textSpan = toggle.querySelector('.feature-comparison-toggle-text');\n        const icon = toggle.querySelector('.feature-comparison-toggle-icon');\n\n        let expanded = false;\n\n        const applyState = () => {\n            rows.forEach((row) => {\n                row.classList.toggle('d-none', !expanded);\n            });\n\n            if (textSpan) {\n                // Return the promise so eslint knows it is handled.\n                return Str.get_string(expanded ? 'showless' : 'showmore')\n                    .then((str) => {\n                        textSpan.textContent = str;\n                        return null;\n                    })\n                    .catch(() => null);\n            }\n\n            if (icon) {\n                icon.classList.toggle('fa-chevron-down', !expanded);\n                icon.classList.toggle('fa-chevron-up', expanded);\n            }\n\n            return null;\n        };\n\n        toggle.addEventListener('click', (e) => {\n            e.preventDefault();\n            expanded = !expanded;\n            applyState();\n        });\n\n        applyState();\n    };\n\n    /**\n     * Initialise all feature comparison cards.\n     */\n    const init = () => {\n        document.querySelectorAll('.feature-comparison-card')\n            .forEach(initCard);\n    };\n\n    return {\n        init: init\n    };\n});"],"names":["define","Str","initCard","card","rows","Array","from","querySelectorAll","toggle","querySelector","length","textSpan","icon","expanded","applyState","forEach","row","classList","get_string","then","str","textContent","catch","addEventListener","e","preventDefault","init","document"],"mappings":";;;;;;AAsBAA,uCAAO,CAAC,aAAa,SAASC,WAOpBC,SAAYC,WACTA,kBAICC,KAAOC,MAAMC,KACfH,KAAKI,iBAAiB,qDAEpBC,OAASL,KAAKM,cAAc,kCAE7BL,KAAKM,SAAWF,oBAIfG,SAAWH,OAAOC,cAAc,mCAChCG,KAAOJ,OAAOC,cAAc,uCAE9BI,UAAW,QAETC,WAAa,KACfV,KAAKW,SAASC,MACVA,IAAIC,UAAUT,OAAO,UAAWK,aAGhCF,SAEOV,IAAIiB,WAAWL,SAAW,WAAa,YACzCM,MAAMC,MACHT,SAASU,YAAcD,IAChB,QAEVE,OAAM,IAAM,QAGjBV,OACAA,KAAKK,UAAUT,OAAO,mBAAoBK,UAC1CD,KAAKK,UAAUT,OAAO,gBAAiBK,WAGpC,OAGXL,OAAOe,iBAAiB,SAAUC,IAC9BA,EAAEC,iBACFZ,UAAYA,SACZC,gBAGJA,oBAWG,CACHY,KANS,KACTC,SAASpB,iBAAiB,4BACrBQ,QAAQb"}